<!DOCTYPE html>
<html> 
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script type="text/javascript" src="j2ds/j2ds.js"></script>
  <title>html5 page</title>
 </head>

 <body>
<!--// this is body of HTML-doc //-->
<canvas id="fpsTest" width="400" height="400"></canvas>

<img src="Demo/img/map.png" alt="" id="img" />

<script type="text/javascript">

$('fpsTest').width= 800;
$('fpsTest').height= 600;
 
var scene= j2ds.scene;
var input= j2ds.input;

var im= scene.createImageMap('img');

var rabbitImage= im.createAnimation(6, 56, 47, 41, 1);

scene.init('fpsTest');

//scene.fullScreen(true);

var nodesCount= 0;
var nodes= [];


var fpsTest= function () {

 scene.clear();

 if (input.lClick) {
  for (var n= 0; n<10; n+=1) {
   var o= scene.addSpriteNode(input.pos, vec2df(30, 30), rabbitImage);
   o.dx= 6-Random(0, 12); o.dy= 6-Random(0, 12);
   nodes.push(o);
   nodesCount= nodes.length; 
  }
 }

 for (var i= 0; i < nodesCount; i+=1) {
  //if (nodes[i].isCollisionScene().x) nodes[i].dx*= (-1);
  //if (nodes[i].isCollisionScene().y) nodes[i].dy*= (-1);  
  if (nodes[i].isCollisionScene().all) {
   nodes.splice(i, 1);
   nodesCount= nodes.length;
   continue;
  }
  nodes[i].move(vec2di(nodes[i].dx, nodes[i].dy));
  nodes[i].draw();
 } 
 
	scene.drawText(vec2di(10, 10), 'Зайчики: '+ nodesCount);
};

scene.start(fpsTest, 60);
</script>



<!--// end of HTML-doc //-->
 </body>
</html>
